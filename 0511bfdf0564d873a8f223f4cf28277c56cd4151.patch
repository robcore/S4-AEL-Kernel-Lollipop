From 0511bfdf0564d873a8f223f4cf28277c56cd4151 Mon Sep 17 00:00:00 2001
From: robcore <robpatershuk@gmail.com>
Date: Wed, 13 Apr 2016 09:19:27 -0600
Subject: [PATCH] revert 0136-cfg80211-Fix-memory-leak.patch

---
 net/wireless/reg.c | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

diff --git a/net/wireless/reg.c b/net/wireless/reg.c
index 6109961..d12f66a 100644
--- a/net/wireless/reg.c
+++ b/net/wireless/reg.c
@@ -2263,15 +2263,10 @@ static int __set_regdom(const struct ieee80211_regdomain *rd)
 		 * However if a driver requested this specific regulatory
 		 * domain we keep it for its private use
 		 */
-		if (last_request->initiator == NL80211_REGDOM_SET_BY_DRIVER) {
-			const struct ieee80211_regdomain *tmp;
-
-			tmp = request_wiphy->regd;
+		if (last_request->initiator == NL80211_REGDOM_SET_BY_DRIVER)
 			request_wiphy->regd = rd;
-			kfree(tmp);
-		} else {
+		else
 			kfree(rd);
-		}
 
 		rd = NULL;
 
